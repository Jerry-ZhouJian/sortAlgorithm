<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<!--
归并排序：
    归并排序是一种分治算法。其思想是将原始数组切分成较小的数组，直到每个小数组只有一个位置，接着将小数组归并成较大的数组，直到最后一个排序完毕的大数组。Mozilla,Firefox使用归并实现sort方法。
-->

<script>


    class ArrayList{

        constructor(arr){
            //判断传进来是不是一个数组
            if(Array.prototype.isPrototypeOf(arr)){

                this.array = arr

            }else{

                alert('请传入一个数组')
                return;

            }

        }

        //声明swap方法
        swap(index1, index2){
            var aux = this.array[index1];
            this.array[index1] = this.array[index2];
            this.array[index2] = aux;
        }

        //声明merge方法，用于排序
        merge(left,right){

            let result = [],il=0,ir=0;
            //比较两边数组的大小，将小的存到result内
            while(il < left.length && ir < right.length){
                if(left[il]  < right[ir]){
                    result.push(left[il++])
                }else{
                    result.push(right[ir++])
                }
            }
            //将比较完left剩下的存到result中
            while(il < left.length){
                result.push(left[il++])
            }
            //将比较完right剩下的存到result中
            while(ir < right.length){
                result.push(right[ir++])
            }
            //将最后合并好的数组返回出去
            return result;
        }

        //声明mergeSortRec函数，用于切割数组
        mergeSortRec(array){
           var length = array.length
            if(length === 1){
               return array
            }
            //记录中间位置
            var mid = Math.floor(length/2)
            var left = array.slice(0,mid)
            var right = array.slice(mid,length)

            return this.merge(this.mergeSortRec(left),this.mergeSortRec(right))

        }

        //构建数据结构
        insert(item){
            this.array.push(item)
        };

        //转成字符串，方便调试
        toString(){

            return this.array.join();

        };

        /*
        * 归并排序：
        *   归并排序是一种分治算法。其思想是将原始数组切分成较小的数组，直到每个小数组只有一个位置，接着将小数组归并成较大的数组，直到最后一个排序完毕的大数组。Mozilla,Firefox使用归并实现sort方法。
        * */

        mergeSort() {
            this.array = this.mergeSortRec(this.array)
        };

    }

    var arr = [3,1,4,7,2,9,8,13,17,15]

    let array = new ArrayList(arr);

    array.mergeSort()

    arr =  array.array
    console.log(arr)
</script>
</body>
</html>